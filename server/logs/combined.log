{"level":"warn","message":"OPENAI_API_KEY not found. AI features will be disabled.","service":"howparth-api","timestamp":"2025-08-29 21:54:55"}
{"level":"info","message":"Server running on port 3001","service":"howparth-api","timestamp":"2025-08-29 21:54:55"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-29 21:54:55"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-29 22:10:12"}
{"level":"info","message":"Server running on port 3001","service":"howparth-api","timestamp":"2025-08-29 22:10:12"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-29 22:10:12"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 05:17:22"}
{"level":"info","message":"Server running on port 3001","service":"howparth-api","timestamp":"2025-08-30 05:17:22"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 05:17:22"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 05:23:43"}
{"level":"info","message":"Server running on port 3001","service":"howparth-api","timestamp":"2025-08-30 05:23:43"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 05:23:43"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-08-30 05:28:57"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 05:33:41"}
{"level":"info","message":"Server running on port 3001","service":"howparth-api","timestamp":"2025-08-30 05:33:41"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 05:33:41"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 05:40:46"}
{"level":"info","message":"Server running on port 3001","service":"howparth-api","timestamp":"2025-08-30 05:40:46"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 05:40:46"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 05:45:36"}
{"level":"info","message":"Server running on port 3001","service":"howparth-api","timestamp":"2025-08-30 05:45:36"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 05:45:36"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 05:55:42"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-08-30 05:55:42"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-08-30 05:55:42"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-08-30 05:55:42"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 05:55:42"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-08-30 06:19:25"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 06:19:46"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-08-30 06:19:46"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-08-30 06:19:46"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-08-30 06:19:46"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 06:19:46"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 06:23:45"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-08-30 06:23:45"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-08-30 06:23:45"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-08-30 06:23:45"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 06:23:45"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 06:33:02"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-08-30 06:33:02"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-08-30 06:33:02"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-08-30 06:33:02"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 06:33:02"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 07:02:22"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-08-30 07:02:22"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-08-30 07:02:22"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-08-30 07:02:22"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 07:02:22"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 07:02:48"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-08-30 07:02:48"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-08-30 07:02:48"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-08-30 07:02:48"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 07:02:48"}
{"clientVersion":"5.22.0","level":"error","message":"Login error: \nInvalid `prisma.user.findUnique()` invocation in\n/Users/opium/HOWPARTH/howparth/server/routes/auth.js:144:36\n\n  141 const { email, password } = req.body;\n  142 \n  143 // Find user\nâ†’ 144 const user = await prisma.user.findUnique(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:10\n   | \n 9 |   provider = \"postgresql\"\n10 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1","name":"PrismaClientInitializationError","service":"howparth-api","stack":"PrismaClientInitializationError: \nInvalid `prisma.user.findUnique()` invocation in\n/Users/opium/HOWPARTH/howparth/server/routes/auth.js:144:36\n\n  141 const { email, password } = req.body;\n  142 \n  143 // Find user\nâ†’ 144 const user = await prisma.user.findUnique(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:10\n   | \n 9 |   provider = \"postgresql\"\n10 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1\n    at $n.handleRequestError (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/auth.js:144:18","timestamp":"2025-08-30 07:12:18"}
{"level":"error","message":"Signup error: Cannot read properties of undefined (reading 'id')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:132:22","timestamp":"2025-08-30 07:31:51"}
{"level":"error","message":"Signup error: Cannot read properties of undefined (reading 'id')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:132:22","timestamp":"2025-08-30 07:31:51"}
{"level":"error","message":"Signup error: Cannot read properties of undefined (reading 'id')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'id')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:132:22","timestamp":"2025-08-30 07:31:51"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:31:52"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:31:52"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:473:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:31:52"}
{"level":"error","message":"Signup error: crypto.createCipher is not a function","service":"howparth-api","stack":"TypeError: crypto.createCipher is not a function\n    at encryptData (/Users/opium/HOWPARTH/howparth/server/routes/auth.js:52:25)\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:165:23","timestamp":"2025-08-30 07:32:27"}
{"level":"error","message":"Login error: crypto.createCipher is not a function","service":"howparth-api","stack":"TypeError: crypto.createCipher is not a function\n    at encryptData (/Users/opium/HOWPARTH/howparth/server/routes/auth.js:52:25)\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:273:23","timestamp":"2025-08-30 07:32:27"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:32:28"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:32:28"}
{"level":"info","message":"Email verified for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:32:28"}
{"level":"info","message":"Password reset email sent to: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:32:28"}
{"level":"info","message":"Password reset for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:32:28"}
{"level":"error","message":"MFA setup error: crypto.createCipher is not a function","service":"howparth-api","stack":"TypeError: crypto.createCipher is not a function\n    at encryptData (/Users/opium/HOWPARTH/howparth/server/routes/auth.js:52:25)\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:751:29\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-30 07:32:29"}
{"level":"error","message":"MFA verification error: crypto.createDecipher is not a function","service":"howparth-api","stack":"TypeError: crypto.createDecipher is not a function\n    at decryptData (/Users/opium/HOWPARTH/howparth/server/routes/auth.js:65:27)\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:811:20\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-30 07:32:29"}
{"level":"error","message":"MFA verification error: crypto.createDecipher is not a function","service":"howparth-api","stack":"TypeError: crypto.createDecipher is not a function\n    at decryptData (/Users/opium/HOWPARTH/howparth/server/routes/auth.js:65:27)\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:882:20\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-30 07:32:29"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:473:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:32:29"}
{"level":"info","message":"New user registered: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:32:55"}
{"level":"error","message":"Signup error: token is not defined","service":"howparth-api","stack":"ReferenceError: token is not defined\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:184:9","timestamp":"2025-08-30 07:32:55"}
{"level":"info","message":"User logged in: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:32:56"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:32:57"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:32:57"}
{"level":"info","message":"Email verified for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:32:57"}
{"level":"info","message":"Password reset email sent to: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:32:57"}
{"level":"info","message":"Password reset for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:32:57"}
{"code":"ERR_CRYPTO_INVALID_IV","level":"error","message":"MFA verification error: Invalid initialization vector","service":"howparth-api","stack":"TypeError: Invalid initialization vector\n    at Decipheriv.createCipherBase (node:internal/crypto/cipher:121:19)\n    at Decipheriv.createCipherWithIV (node:internal/crypto/cipher:133:3)\n    at new Decipheriv (node:internal/crypto/cipher:278:3)\n    at Object.createDecipheriv (node:crypto:147:10)\n    at decryptData (/Users/opium/HOWPARTH/howparth/server/routes/auth.js:65:27)\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:811:20\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-30 07:32:57"}
{"code":"ERR_CRYPTO_INVALID_IV","level":"error","message":"MFA verification error: Invalid initialization vector","service":"howparth-api","stack":"TypeError: Invalid initialization vector\n    at Decipheriv.createCipherBase (node:internal/crypto/cipher:121:19)\n    at Decipheriv.createCipherWithIV (node:internal/crypto/cipher:133:3)\n    at new Decipheriv (node:internal/crypto/cipher:278:3)\n    at Object.createDecipheriv (node:crypto:147:10)\n    at decryptData (/Users/opium/HOWPARTH/howparth/server/routes/auth.js:65:27)\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:882:20\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-08-30 07:32:57"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:473:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:32:57"}
{"level":"info","message":"New user registered: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:34:24"}
{"level":"info","message":"User logged in: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:34:24"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:34:25"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:34:25"}
{"level":"info","message":"Email verified for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:34:25"}
{"level":"info","message":"Password reset email sent to: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:34:25"}
{"level":"info","message":"Password reset for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:34:26"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:473:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:34:26"}
{"level":"info","message":"New user registered: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:35:41"}
{"level":"info","message":"User logged in: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:35:42"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:35:43"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:35:43"}
{"level":"info","message":"Email verified for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:35:43"}
{"level":"info","message":"Password reset email sent to: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:35:43"}
{"level":"info","message":"Password reset for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:35:43"}
{"level":"info","message":"MFA enabled for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:35:43"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:473:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:35:43"}
{"level":"info","message":"New user registered: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:36:06"}
{"level":"info","message":"User logged in: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:36:07"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:36:08"}
{"level":"error","message":"Token refresh error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:375:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:36:08"}
{"level":"info","message":"Email verified for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:36:08"}
{"level":"info","message":"Password reset email sent to: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:36:08"}
{"level":"info","message":"Password reset for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:36:08"}
{"level":"info","message":"MFA enabled for user: test@example.com","service":"howparth-api","timestamp":"2025-08-30 07:36:08"}
{"level":"error","message":"Logout error: Cannot read properties of undefined (reading 'refreshToken')","service":"howparth-api","stack":"TypeError: Cannot read properties of undefined (reading 'refreshToken')\n    at /Users/opium/HOWPARTH/howparth/server/routes/auth.js:473:38\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/layer.js:95:5)\n    at /Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:346:12)\n    at next (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:175:3)\n    at router (/Users/opium/HOWPARTH/howparth/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-08-30 07:36:08"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 14:33:07"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3002","service":"howparth-api","timestamp":"2025-08-30 14:33:07"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-08-30 14:33:07"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3002/health","service":"howparth-api","timestamp":"2025-08-30 14:33:07"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 14:33:07"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-08-30 14:56:52"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-08-30 14:56:52"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-08-30 15:04:19"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3002","service":"howparth-api","timestamp":"2025-08-30 15:04:19"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-08-30 15:04:19"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3002/health","service":"howparth-api","timestamp":"2025-08-30 15:04:19"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-08-30 15:04:19"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 02:58:47"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 02:58:47"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 02:58:47"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 02:58:47"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 02:58:47"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 03:15:47"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 03:15:47"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 03:15:47"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 03:15:47"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 03:15:47"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 03:17:43"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 03:17:43"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 03:17:43"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 03:17:43"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 03:17:43"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 03:18:27"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 03:18:27"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 03:18:27"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 03:18:27"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 03:18:27"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-09-02 03:19:28"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 03:21:09"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 03:21:09"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 03:21:09"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 03:21:09"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 03:21:09"}
{"clientVersion":"5.22.0","level":"error","message":"Failed to get user API key: \nInvalid `prisma.user.findUnique()` invocation in\n/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:113:38\n\n  110 // Get and decrypt user's API key\n  111 async getUserApiKey(userId) {\n  112   try {\nâ†’ 113     const user = await prisma.user.findUnique(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:10\n   | \n 9 |   provider = \"postgresql\"\n10 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1","name":"PrismaClientInitializationError","service":"howparth-api","stack":"PrismaClientInitializationError: \nInvalid `prisma.user.findUnique()` invocation in\n/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:113:38\n\n  110 // Get and decrypt user's API key\n  111 async getUserApiKey(userId) {\n  112   try {\nâ†’ 113     const user = await prisma.user.findUnique(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:10\n   | \n 9 |   provider = \"postgresql\"\n10 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1\n    at $n.handleRequestError (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async APIKeyService.getUserApiKey (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:113:20)\n    at async APIKeyService.getOpenAIClient (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:138:22)\n    at async AIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/aiService.js:119:22)\n    at async RealAIChatController.handleStreamingChat (/Users/opium/HOWPARTH/howparth/server/controllers/realAIChatController.js:40:22)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:35:3","timestamp":"2025-09-02 03:21:21"}
{"level":"error","message":"Failed to create OpenAI client for user: No valid OpenAI API key found for user","service":"howparth-api","stack":"Error: No valid OpenAI API key found for user\n    at APIKeyService.getOpenAIClient (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:141:15)\n    at async AIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/aiService.js:119:22)\n    at async RealAIChatController.handleStreamingChat (/Users/opium/HOWPARTH/howparth/server/controllers/realAIChatController.js:40:22)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:35:3","timestamp":"2025-09-02 03:21:21"}
{"level":"error","message":"Chat response generation error: No valid OpenAI API key found for user","service":"howparth-api","stack":"Error: No valid OpenAI API key found for user\n    at APIKeyService.getOpenAIClient (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:141:15)\n    at async AIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/aiService.js:119:22)\n    at async RealAIChatController.handleStreamingChat (/Users/opium/HOWPARTH/howparth/server/controllers/realAIChatController.js:40:22)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:35:3","timestamp":"2025-09-02 03:21:21"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-09-02 03:21:43"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 03:23:47"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 03:23:47"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 03:23:47"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 03:23:47"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 03:23:47"}
{"clientVersion":"5.22.0","level":"error","message":"Failed to get user API key: \nInvalid `prisma.user.findUnique()` invocation in\n/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:113:38\n\n  110 // Get and decrypt user's API key\n  111 async getUserApiKey(userId) {\n  112   try {\nâ†’ 113     const user = await prisma.user.findUnique(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:10\n   | \n 9 |   provider = \"postgresql\"\n10 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1","name":"PrismaClientInitializationError","service":"howparth-api","stack":"PrismaClientInitializationError: \nInvalid `prisma.user.findUnique()` invocation in\n/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:113:38\n\n  110 // Get and decrypt user's API key\n  111 async getUserApiKey(userId) {\n  112   try {\nâ†’ 113     const user = await prisma.user.findUnique(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:10\n   | \n 9 |   provider = \"postgresql\"\n10 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1\n    at $n.handleRequestError (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async APIKeyService.getUserApiKey (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:113:20)\n    at async APIKeyService.getOpenAIClient (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:138:22)\n    at async AIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/aiService.js:119:22)\n    at async RealAIChatController.handleStreamingChat (/Users/opium/HOWPARTH/howparth/server/controllers/realAIChatController.js:40:22)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:35:3","timestamp":"2025-09-02 03:24:09"}
{"level":"error","message":"Failed to create OpenAI client for user: No valid OpenAI API key found for user","service":"howparth-api","stack":"Error: No valid OpenAI API key found for user\n    at APIKeyService.getOpenAIClient (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:141:15)\n    at async AIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/aiService.js:119:22)\n    at async RealAIChatController.handleStreamingChat (/Users/opium/HOWPARTH/howparth/server/controllers/realAIChatController.js:40:22)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:35:3","timestamp":"2025-09-02 03:24:09"}
{"level":"error","message":"Chat response generation error: No valid OpenAI API key found for user","service":"howparth-api","stack":"Error: No valid OpenAI API key found for user\n    at APIKeyService.getOpenAIClient (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:141:15)\n    at async AIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/aiService.js:119:22)\n    at async RealAIChatController.handleStreamingChat (/Users/opium/HOWPARTH/howparth/server/controllers/realAIChatController.js:40:22)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:35:3","timestamp":"2025-09-02 03:24:09"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-09-02 20:25:54"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 20:26:01"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 20:26:01"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 20:26:01"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 20:26:01"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 20:26:01"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-09-02 20:32:21"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 20:32:26"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 20:32:26"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 20:32:26"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 20:32:26"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 20:32:26"}
{"clientVersion":"5.22.0","level":"error","message":"Failed to get user API key: \nInvalid `prisma.user.findUnique()` invocation in\n/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:113:38\n\n  110 // Get and decrypt user's API key\n  111 async getUserApiKey(userId) {\n  112   try {\nâ†’ 113     const user = await prisma.user.findUnique(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:10\n   | \n 9 |   provider = \"postgresql\"\n10 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1","name":"PrismaClientInitializationError","service":"howparth-api","stack":"PrismaClientInitializationError: \nInvalid `prisma.user.findUnique()` invocation in\n/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:113:38\n\n  110 // Get and decrypt user's API key\n  111 async getUserApiKey(userId) {\n  112   try {\nâ†’ 113     const user = await prisma.user.findUnique(\nerror: Environment variable not found: DATABASE_URL.\n  -->  schema.prisma:10\n   | \n 9 |   provider = \"postgresql\"\n10 |   url      = env(\"DATABASE_URL\")\n   | \n\nValidation Error Count: 1\n    at $n.handleRequestError (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:7615)\n    at $n.handleAndLogRequestError (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:6623)\n    at $n.request (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:121:6307)\n    at async l (/Users/opium/HOWPARTH/howparth/node_modules/@prisma/client/runtime/library.js:130:9633)\n    at async APIKeyService.getUserApiKey (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:113:20)\n    at async APIKeyService.getOpenAIClient (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:138:22)\n    at async AIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/aiService.js:119:22)\n    at async RealAIChatController.handleStreamingChat (/Users/opium/HOWPARTH/howparth/server/controllers/realAIChatController.js:40:22)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:35:3","timestamp":"2025-09-02 20:32:36"}
{"level":"error","message":"Failed to create OpenAI client for user: No valid OpenAI API key found for user","service":"howparth-api","stack":"Error: No valid OpenAI API key found for user\n    at APIKeyService.getOpenAIClient (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:141:15)\n    at async AIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/aiService.js:119:22)\n    at async RealAIChatController.handleStreamingChat (/Users/opium/HOWPARTH/howparth/server/controllers/realAIChatController.js:40:22)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:35:3","timestamp":"2025-09-02 20:32:36"}
{"level":"error","message":"Chat response generation error: No valid OpenAI API key found for user","service":"howparth-api","stack":"Error: No valid OpenAI API key found for user\n    at APIKeyService.getOpenAIClient (/Users/opium/HOWPARTH/howparth/server/services/apiKeyService.js:141:15)\n    at async AIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/aiService.js:119:22)\n    at async RealAIChatController.handleStreamingChat (/Users/opium/HOWPARTH/howparth/server/controllers/realAIChatController.js:40:22)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:35:3","timestamp":"2025-09-02 20:32:36"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-09-02 20:33:10"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 20:33:16"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 20:33:16"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 20:33:16"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 20:33:16"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 20:33:16"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-09-02 20:40:45"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-02 20:40:51"}
{"level":"info","message":"ðŸš€ Backend server running on http://localhost:3001","service":"howparth-api","timestamp":"2025-09-02 20:40:51"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-02 20:40:51"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-02 20:40:51"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-02 20:40:51"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-04 23:38:39"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-04 23:38:39"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3002","service":"howparth-api","timestamp":"2025-09-04 23:38:39"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-04 23:38:39"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3002/health","service":"howparth-api","timestamp":"2025-09-04 23:38:39"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-04 23:38:39"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-04 23:38:39"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-04 23:38:39"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-05 01:40:43"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 01:40:43"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3001","service":"howparth-api","timestamp":"2025-09-05 01:40:43"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-05 01:40:43"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-05 01:40:43"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-05 01:40:43"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-05 01:40:43"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 01:40:43"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-05 02:37:37"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 02:37:37"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3001","service":"howparth-api","timestamp":"2025-09-05 02:37:37"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-05 02:37:37"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-05 02:37:37"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-05 02:37:37"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-05 02:37:37"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 02:37:37"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-05 03:05:36"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:05:36"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3001","service":"howparth-api","timestamp":"2025-09-05 03:05:36"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-05 03:05:36"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-05 03:05:36"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-05 03:05:36"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-05 03:05:36"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:05:36"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-05 03:15:20"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:15:20"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3001","service":"howparth-api","timestamp":"2025-09-05 03:15:20"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-05 03:15:20"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-05 03:15:20"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-05 03:15:20"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-05 03:15:20"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:15:20"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-05 03:19:56"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:19:56"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3001","service":"howparth-api","timestamp":"2025-09-05 03:19:56"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-05 03:19:56"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-05 03:19:56"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-05 03:19:56"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-05 03:19:56"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:19:56"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-05 03:25:01"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:25:01"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3001","service":"howparth-api","timestamp":"2025-09-05 03:25:01"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-05 03:25:01"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-05 03:25:01"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-05 03:25:01"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-05 03:25:01"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:25:01"}
{"level":"info","message":"Attempt 1: Using model ft:gpt-3.5-turbo-0125:personal::CAmRK7vU for user test","service":"howparth-api","timestamp":"2025-09-05 03:26:25"}
{"level":"warn","message":"âŒ Attempt 1 failed with model ft:gpt-3.5-turbo-0125:personal::CAmRK7vU:","service":"howparth-api","timestamp":"2025-09-05 03:26:26"}
{"level":"info","message":"Attempt 1: Using model gpt-3.5-turbo for user test","service":"howparth-api","timestamp":"2025-09-05 03:26:27"}
{"level":"warn","message":"âŒ Attempt 1 failed with model gpt-3.5-turbo:","service":"howparth-api","timestamp":"2025-09-05 03:26:28"}
{"level":"info","message":"Attempt 2: Using model ft:gpt-3.5-turbo-0125:personal::CAmRK7vU for user test","service":"howparth-api","timestamp":"2025-09-05 03:26:29"}
{"level":"warn","message":"âŒ Attempt 2 failed with model ft:gpt-3.5-turbo-0125:personal::CAmRK7vU:","service":"howparth-api","timestamp":"2025-09-05 03:26:29"}
{"level":"info","message":"Attempt 2: Using model gpt-3.5-turbo for user test","service":"howparth-api","timestamp":"2025-09-05 03:26:31"}
{"level":"warn","message":"âŒ Attempt 2 failed with model gpt-3.5-turbo:","service":"howparth-api","timestamp":"2025-09-05 03:26:34"}
{"level":"info","message":"Attempt 3: Using model ft:gpt-3.5-turbo-0125:personal::CAmRK7vU for user test","service":"howparth-api","timestamp":"2025-09-05 03:26:36"}
{"level":"warn","message":"âŒ Attempt 3 failed with model ft:gpt-3.5-turbo-0125:personal::CAmRK7vU:","service":"howparth-api","timestamp":"2025-09-05 03:26:39"}
{"level":"info","message":"Attempt 3: Using model gpt-3.5-turbo for user test","service":"howparth-api","timestamp":"2025-09-05 03:26:39"}
{"level":"warn","message":"âŒ Attempt 3 failed with model gpt-3.5-turbo:","service":"howparth-api","timestamp":"2025-09-05 03:26:39"}
{"code":null,"error":{"code":null,"message":"Unrecognized request argument supplied: timeout","param":null,"type":"invalid_request_error"},"headers":{"access-control-expose-headers":"X-Request-ID","alt-svc":"h3=\":443\"; ma=86400","cf-cache-status":"DYNAMIC","cf-ray":"97a0bcf03f8146ec-BOM","connection":"keep-alive","content-length":"159","content-type":"application/json","date":"Thu, 04 Sep 2025 21:56:39 GMT","openai-organization":"personal-4xchng","openai-processing-ms":"23","openai-project":"proj_NKKggT0YxOEgeeHcFlMwC6aS","openai-version":"2020-10-01","server":"cloudflare","set-cookie":"__cf_bm=ZsaucIK24DIfRHlIhDrJ0zN0RGyec.AmDD143QPJlsQ-1757022999-1.0.1.1-O1NcnbZH1UDFWiODqsTOgF02jq2aQZ.4WUKZg.oLNDOQBwjA84JGXCUcEb8Hi.wC1qXxDO6LBJlzjs5lKeu3W0PpuWxWorP9rNqXZ8m_XYI; path=/; expires=Thu, 04-Sep-25 22:26:39 GMT; domain=.api.openai.com; HttpOnly; Secure; SameSite=None, _cfuvid=DMr_Y6xbSo38m4EJjxKjSi27pHCp6Z0Mom.d4VFUpEE-1757022999424-0.0.1.1-604800000; path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None","strict-transport-security":"max-age=31536000; includeSubDomains; preload","x-content-type-options":"nosniff","x-envoy-upstream-service-time":"30","x-ratelimit-limit-requests":"10000","x-ratelimit-limit-tokens":"200000","x-ratelimit-remaining-requests":"9998","x-ratelimit-remaining-tokens":"199948","x-ratelimit-reset-requests":"14.525s","x-ratelimit-reset-tokens":"15ms","x-request-id":"req_2f5b312725ce466793ac2a9ea638f492"},"level":"error","message":"âŒ All attempts failed for user test: 400 Unrecognized request argument supplied: timeout","param":null,"request_id":"req_2f5b312725ce466793ac2a9ea638f492","service":"howparth-api","stack":"Error: 400 Unrecognized request argument supplied: timeout\n    at APIError.generate (/Users/opium/HOWPARTH/howparth/node_modules/openai/error.js:45:20)\n    at OpenAI.makeStatusError (/Users/opium/HOWPARTH/howparth/node_modules/openai/core.js:302:33)\n    at OpenAI.makeRequest (/Users/opium/HOWPARTH/howparth/node_modules/openai/core.js:346:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async EnhancedAIService.generateChatResponse (/Users/opium/HOWPARTH/howparth/server/services/enhancedAIService.js:134:28)\n    at async EnhancedChatController.handleChat (/Users/opium/HOWPARTH/howparth/server/controllers/enhancedChatController.js:66:26)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:14:3","status":400,"timestamp":"2025-09-05 03:26:39","type":"invalid_request_error"}
{"level":"error","message":"âŒ Chat request failed for user test: Failed to generate response after multiple attempts","service":"howparth-api","stack":"Error: Failed to generate response after multiple attempts\n    at EnhancedChatController.handleChat (/Users/opium/HOWPARTH/howparth/server/controllers/enhancedChatController.js:74:15)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async /Users/opium/HOWPARTH/howparth/server/routes/chat.js:14:3","timestamp":"2025-09-05 03:26:39"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-09-05 03:29:27"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-05 03:33:00"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:33:00"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3001","service":"howparth-api","timestamp":"2025-09-05 03:33:00"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-05 03:33:00"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-05 03:33:00"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-05 03:33:00"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-05 03:33:00"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 03:33:00"}
{"level":"info","message":"Attempt 1: Using model ft:gpt-3.5-turbo-0125:personal::CAmRK7vU for user test","service":"howparth-api","timestamp":"2025-09-05 03:34:58"}
{"level":"info","message":"âœ… Success: Generated response in 1403ms using ft:gpt-3.5-turbo-0125:personal::CAmRK7vU","service":"howparth-api","timestamp":"2025-09-05 03:35:00"}
{"level":"info","message":"âœ… Chat request successful for user test in 1404ms","service":"howparth-api","timestamp":"2025-09-05 03:35:00"}
{"level":"info","message":"Attempt 1: Using model ft:gpt-3.5-turbo-0125:personal::CAmRK7vU for user final-test","service":"howparth-api","timestamp":"2025-09-05 03:43:38"}
{"level":"info","message":"âœ… Success: Generated response in 973ms using ft:gpt-3.5-turbo-0125:personal::CAmRK7vU","service":"howparth-api","timestamp":"2025-09-05 03:43:39"}
{"level":"info","message":"âœ… Chat request successful for user final-test in 973ms","service":"howparth-api","timestamp":"2025-09-05 03:43:39"}
{"level":"info","message":"SIGTERM received, shutting down gracefully","service":"howparth-api","timestamp":"2025-09-05 03:59:45"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-05 04:01:33"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 04:01:33"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3001","service":"howparth-api","timestamp":"2025-09-05 04:01:33"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-05 04:01:33"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-05 04:01:33"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-05 04:01:33"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-05 04:01:33"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 04:01:33"}
{"level":"info","message":"AI Service initialized - using per-user API keys","service":"howparth-api","timestamp":"2025-09-05 04:14:10"}
{"level":"info","message":"Enhanced AI Service initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 04:14:10"}
{"level":"info","message":"ðŸš€ Backend server running on http://0.0.0.0:3001","service":"howparth-api","timestamp":"2025-09-05 04:14:10"}
{"level":"info","message":"ðŸ“ Working directory: /Users/opium/HOWPARTH/howparth","service":"howparth-api","timestamp":"2025-09-05 04:14:10"}
{"level":"info","message":"ðŸ”— Health check: http://localhost:3001/health","service":"howparth-api","timestamp":"2025-09-05 04:14:10"}
{"level":"info","message":"ðŸŒ Network accessible on all interfaces","service":"howparth-api","timestamp":"2025-09-05 04:14:10"}
{"level":"info","message":"Environment: development","service":"howparth-api","timestamp":"2025-09-05 04:14:10"}
{"level":"info","message":"âœ… Enhanced Chat Controller initialized with robust error handling","service":"howparth-api","timestamp":"2025-09-05 04:14:10"}
